

Запись Grub4Dos и Syslinux через терминал или командную строку, т.е. вручную.

Для начала нам понадобится 2 архива.

grub4dos-0.4.6a-2024-02-26.7z или grubinst_1.0.1_bin_win.7z
и
syslinux-6.03.tar.gz или syslinux-5.10.tar.gz

Распакуйте их.

Установка Grub4dos из Windows

Чтобы установить grub4dos в MBR из Windows XP/2000 - скачайте архивы grubinst/grubutil Здесь (или Здесь). Grubinst.exe это утилита командной строки, но у неё есть и графический интерфейс (GUI) он есть в составе скачиваемых архивов. Проверьте номер диска на который вы собираетесь установить grub4dos - Используйте для этого "Windows Disk Management console" (в консоли напишите путь C:\Windows\System32\diskmgmt.msc [ENTER]). Результатом установки на неверный раздел будет нежелание Windows загружаться после перезагрузки, так что будьте осторожны. Чтобы установит загрузчик в MBR на диске disk:0 используйте команду C:\Grub4dos\grubinst.exe (hd0); Чтобы установит загрузчик в MBR на диске disk:1 используйте команду C:\Grub4dos\grubinst.exe (hd1); и так далее.

Опции для Grubinst:

-v (Подробно)
-l (Показать раздделы - Например: C:\Grub4dos\grubinst.exe –l (hd0))
-t (режим - "только для чтения")
-h (Помощь)
Затем скопируйте C:\Grub4dos\grldr в корень (поддерживаемого) локального диска.

Используя Grubinst, мы можем установить код Grub4dos в загрузочный сектор раздела. Используя команды с синтаксисами grubinst.exe -p=n [device] или grubinst.exe --install-partition=n [device] (Где n = Номер раздела, начиная с 0 (нуля) Пример для первого раздела: grubinst.exe -p=0 (hd0). Так же можно использовать команду grubinst.exe (hd0,0). grldr должен быть скопирован туда, куда установлен загрузочный код, и этот раздел должен быть активным.

Установка Grub4dos из DOS

Чтобы установить grub4dos в MBR с помощью DOS или Windows 9x скопируйте C:\Grub4dos\BOOTLACE.COM в корень диска с этой ОС. Затем перезагрузите компьютер и загрузите DOS. Установка Grub4dos в MBR на первом жёстком диске (Обычно первый жёсткий диск назначена на загрузку в настройках BIOS) осуществляется командой:

BOOTLACE.COM 0x80
Для установки на второй жёсткий диск используйте команду

BOOTLACE.COM 0x81
Для избежания установки Grub4dos не на тот диск используйте сторонние программы, такие как MBRWizD.exe (найти можно Здесь) чтобы проверить номер\порядок диска.
Скопируйте MBRWizD.exe в корень диска с DOS и в командной строке напишите MBRWizD.exe /List - вы должны будете определить нужный диск, из данных выведенных этой командой (для установки на disk 0 - используйте команду BOOTLACE.COM 0x80; для установки на disk 1 -используйте команду BOOTLACE.COM 0x81; и так далее).
В завершение установки копируем файлы grldr и menu.lst в корень (поддерживаемого) локального диска.

Есть так же вариант установки используя пакет Grubinst, с его помощью можно установит код Grub4dos в загрузочный сектор раздела. Хотя эта функция приписывается bootlace.com, результат установки с его помощью (используйте команду bootlace.com --install-partition=0 0x80) будет следующим:

C:\>bootlace.com --install-partition=0 0x80

Sorry! --install-partition not yet implemented with this release

Для установки загрузчика через пакет grubinst используйте команду с синтаксисом grbins16.exe -p=n [device] или grbins16.exe --install-partition=n [device] (Где n = номер раздела, sначиная с 0 (нуля). Пример для первого раздела: grbins16.exe -p=0 (hd0).

grldr надо скопировать на раздел в который установлен загрузочный код, и этот раздел должен быть активным.

Установка Grub4dos на дискету

Для установки Grub4dos на флоппи дискету или на образ дискеты, будем использовать уже известную нам утилиту bootlace.com. Примечание - bootlace.com В Windows NT/2000/XP/2003/Vista не функционирует полностью из за запрета на прямой доступ к устройствам, Однако установка в образ диска работает нормально. Это работает так же и в DOS/Windows 9x/Linux. Используйте следующую команду для установки загрузчика на первый флоппи диск:

Bootlace.com --floppy --chs 0x00
Для установки Grub4dos в образ флоппи диска используйте команду Bootlace.com --floppy --chs [file] (Где [file] это образ флоппи диска с указанием полного пути к нему.)
Пример: win98.ima корень диска (C:)

Bootlace.com --floppy --chs C:\win98.ima

Установка Grub4Dos из под Linux.

fdisk -l /dev/sdX

где /dev/sdХ - Ваш носитель (флэшка , hdd).

./bootlace.com /dev/sdX

для gpt:

./bootlace.com --gpt /dev/sdX





Syslinux - Windows / Linux.

bios/mtools/syslinux
bios/win32/syslinux.exe
bios/win64/syslinux.exe

syslinux.exe -sf -d /boot/syslinux z:

В приведенном выше примере syslinux.cfg должен быть в z:\boot\syslinux и в PBR.

Следующие опции подходят к любой версии Syslinux:-s Безопасно, медленно, тупо (Safe, Slow, Stupid); более простой код,загружается лучше-f Игнорировать некоторые не фатальные ошибки (force installing)
-r Режим Raid. Если загрузиться не удаётся, сообщить BIOS загрузитьследующее загрузочное устройство (обычно следующий жёсткий диск)
вместо остановки с отображением сообщения об ошибке. Можно
использовать для загрузки с RAID-1.

Следующие опции подходят только для Windows:-m MBR; установить загрузчик в MBR.
-a Active; пометить раздел на устройстве как загружаемый (=bootable)Эта команда, осуществима только в Linux:-o Указывает байт смещения образа файловой системы в файле. Онадолжна быть использована с файлом образа диска.



cmd.bat

@cd/d "%~dp0"
@echo off
SET PATH=%CD%\;%PATH%
cmd.exe




Не забудьте заменить файлы Syslinux формата (*.c32) в зависимости от версии которую вы выбрали в директории /boot/syslinux. Рекомендую версию 5.10.
В Windows это можно сделать так.

cd syslinux-5.10
for /r %Y in (*.c32) do copy "%Y" Z:\boot\syslinux" /y

В Linux-е это можно сделать так.

cd syslinux-5.10
find ./ -type f -iname "*/c32" -exec cp -f {} /run/media/user/flash-card-name/boot/syslinux +;
























